<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="æœåœ£ä¹‹è·¯å¤©æ°”æŸ¥è¯¢å·¥å…· - æ”¯æŒ8ç§è¯­è¨€">
    <title>æœåœ£ä¹‹è·¯å¤©æ°”æŸ¥è¯¢å·¥å…·</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;500;700&display=swap');
        body { font-family: 'Noto Sans SC', -apple-system, BlinkMacSystemFont, sans-serif; }
    </style>
</head>
<body class="bg-gradient-to-br from-amber-50 via-orange-50 to-yellow-50 min-h-screen">
    <div id="root"></div>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <script type="text/babel">
        const { useState, useMemo } = React;

        // å¤šè¯­è¨€ç¿»è¯‘å­—å…¸
        const translations = {
            'zh-CN': {
                title: 'æœåœ£ä¹‹è·¯å¤©æ°”æŸ¥è¯¢',
                subtitle: 'ä¸ºæ‰€æœ‰æœåœ£è€…æä¾›ç²¾å‡†çš„å¤©æ°”é¢„æŠ¥æœåŠ¡ â€¢ æ”¯æŒæ‰€æœ‰è·¯çº¿ â€¢ å†å²æ•°æ®å‚è€ƒ',
                selectRoute: 'é€‰æ‹©è·¯çº¿',
                customRoute: 'âœ¨ è‡ªå®šä¹‰è·¯çº¿',
                customRouteDesc: 'åˆ›å»ºä½ çš„ä¸“å±è·¯çº¿',
                itinerary: 'è¡Œç¨‹å®‰æ’',
                days: 'å¤©',
                total: 'å…±',
                autoFillDates: 'è‡ªåŠ¨å¡«å……æ—¥æœŸ',
                addDay: 'æ·»åŠ ä¸€å¤©',
                locationPlaceholder: 'è¾“å…¥åŸé•‡åç§°ï¼ˆå¦‚ï¼šS å¼€å¤´çš„åŸå¸‚ï¼‰',
                queryWeather: 'æŸ¥è¯¢å¤©æ°”é¢„æŠ¥',
                querying: 'æ­£åœ¨æŸ¥è¯¢å¤©æ°”...',
                historicalData: 'å†å²æ•°æ®',
                weatherForecast: 'å¤©æ°”é¢„æŠ¥',
                cardView: 'ğŸ“‹ è¡¨æ ¼è§†å›¾',
                tableView: 'ğŸ´ å¡ç‰‡è§†å›¾',
                copyTable: 'å¤åˆ¶è¡¨æ ¼',
                copied: 'å·²å¤åˆ¶',
                extremeWeatherAlert: 'æç«¯å¤©æ°”é¢„è­¦',
                weather: 'å¤©æ°”',
                dayTemp: 'æ—¥é—´æ¸©åº¦',
                nightTemp: 'å¤œé—´æ¸©åº¦',
                feelsLike: 'ä½“æ„Ÿ',
                rainProb: 'é™é›¨æ¦‚ç‡',
                sunriseSunset: 'æ—¥å‡ºæ—¥è½',
                bringUmbrella: 'ğŸŒ§ï¸ è®°å¾—å¸¦é›¨å…·',
                keepWarm: 'ğŸ§¥ æ³¨æ„ä¿æš–',
                historicalAvg: 'ğŸ“Š å†å²å¹³å‡',
                usageTip: 'ğŸ’¡ ä½¿ç”¨æç¤º',
                usageTipText: 'åˆ‡æ¢"å¡ç‰‡è§†å›¾"æŸ¥çœ‹ç¾è§‚ç•Œé¢ï¼Œæˆ–"è¡¨æ ¼è§†å›¾"å¤åˆ¶æ–‡æœ¬ã€‚æ•°æ®æ¥æºï¼šAccuWeather + AEMETå®˜æ–¹ã€‚',
                notice: 'âš ï¸ æ³¨æ„äº‹é¡¹',
                noticeText: 'å±±åŒºå¤©æ°”å˜åŒ–å¿«ï¼Œé‡æç«¯å¤©æ°”é¢„è­¦è¯·è°ƒæ•´è¡Œç¨‹ã€‚å®‰å…¨ç¬¬ä¸€ï¼',
                footerText: 'æœ¬å·¥å…·ä¸ºæœåœ£ä¹‹è·¯å¾’æ­¥è€…æä¾›ä¾¿æ·çš„å¤©æ°”æŸ¥è¯¢æœåŠ¡',
                dataSource: 'æ•°æ®æ¥æºï¼šAccuWeather + AEMETï¼ˆè¥¿ç­ç‰™æ°”è±¡å±€ï¼‰',
                weekdays: ['æ—¥', 'ä¸€', 'äºŒ', 'ä¸‰', 'å››', 'äº”', 'å…­'],
                dateTooFar: 'æ‚¨é€‰æ‹©çš„æ—¥æœŸè·ç¦»ç°åœ¨è¶…è¿‡1å¹´ï¼Œå»ºè®®åœ¨å‡ºå‘å‰1å¹´å†…æŸ¥è¯¢å¤©æ°”ä¿¡æ¯ã€‚',
                historicalDataWarning: 'æç¤ºï¼šæ‚¨é€‰æ‹©çš„æ—¥æœŸè¶…å‡ºå¤©æ°”é¢„æŠ¥èŒƒå›´ï¼ˆæœ€å¤šæå‰15å¤©ï¼‰ã€‚ä»¥ä¸‹æ˜¾ç¤ºçš„æ˜¯åŸºäºå†å²æ•°æ®çš„å‚è€ƒä¿¡æ¯ï¼Œä»…ä¾›è§„åˆ’å‚è€ƒã€‚å»ºè®®å‡ºå‘å‰2å‘¨å†æ¬¡æŸ¥è¯¢å®æ—¶å¤©æ°”é¢„æŠ¥è·å–æœ€å‡†ç¡®çš„ä¿¡æ¯ã€‚',
                historicalDataBadge: 'å†å²å‚è€ƒæ•°æ®',
                realTimeForecast: 'å®æ—¶å¤©æ°”é¢„æŠ¥'
            },
            'en': {
                title: 'Camino Weather Tool',
                subtitle: 'Accurate weather forecasts for all pilgrims â€¢ All routes supported â€¢ Historical data',
                selectRoute: 'Select Route',
                customRoute: 'âœ¨ Custom Route',
                customRouteDesc: 'Create your own route',
                itinerary: 'Itinerary',
                days: 'days',
                total: 'Total',
                autoFillDates: 'Auto-fill Dates',
                addDay: 'Add Day',
                locationPlaceholder: 'Enter town name (e.g., towns starting with S)',
                queryWeather: 'Check Weather',
                querying: 'Checking weather...',
                historicalData: 'Historical Data',
                weatherForecast: 'Weather Forecast',
                cardView: 'ğŸ“‹ Table View',
                tableView: 'ğŸ´ Card View',
                copyTable: 'Copy Table',
                copied: 'Copied',
                extremeWeatherAlert: 'Extreme Weather Alert',
                weather: 'Weather',
                dayTemp: 'Day Temp',
                nightTemp: 'Night Temp',
                feelsLike: 'Feels Like',
                rainProb: 'Rain Probability',
                sunriseSunset: 'Sunrise/Sunset',
                bringUmbrella: 'ğŸŒ§ï¸ Bring umbrella',
                keepWarm: 'ğŸ§¥ Keep warm',
                historicalAvg: 'ğŸ“Š Historical avg',
                usageTip: 'ğŸ’¡ Usage Tip',
                usageTipText: 'Switch to "Card View" for better display, or "Table View" to copy text. Data: AccuWeather + AEMET.',
                notice: 'âš ï¸ Notice',
                noticeText: 'Mountain weather changes rapidly. Adjust your plan if extreme weather alert. Safety first!',
                footerText: 'Weather tool for Camino de Santiago pilgrims',
                dataSource: 'Data source: AccuWeather + AEMET (Spanish Meteorological Agency)',
                weekdays: ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'],
                dateTooFar: 'Your selected date is more than 1 year away. Please check weather within 1 year of departure.',
                historicalDataWarning: 'Notice: Your selected dates exceed weather forecast range (max 15 days ahead). Data shown is based on historical averages for planning reference only. Please check actual forecast 2 weeks before departure.',
                historicalDataBadge: 'Historical Reference Data',
                realTimeForecast: 'Real-time Forecast'
            },
            'es': {
                title: 'Herramienta del Tiempo del Camino',
                subtitle: 'Previsiones meteorolÃ³gicas precisas para todos los peregrinos â€¢ Todas las rutas â€¢ Datos histÃ³ricos',
                selectRoute: 'Seleccionar Ruta',
                customRoute: 'âœ¨ Ruta Personalizada',
                customRouteDesc: 'Crea tu propia ruta',
                itinerary: 'Itinerario',
                days: 'dÃ­as',
                total: 'Total',
                autoFillDates: 'Rellenar Fechas',
                addDay: 'AÃ±adir DÃ­a',
                locationPlaceholder: 'Introduce el nombre del pueblo',
                queryWeather: 'Consultar Tiempo',
                querying: 'Consultando tiempo...',
                historicalData: 'Datos HistÃ³ricos',
                weatherForecast: 'PrevisiÃ³n del Tiempo',
                cardView: 'ğŸ“‹ Vista de Tabla',
                tableView: 'ğŸ´ Vista de Tarjetas',
                copyTable: 'Copiar Tabla',
                copied: 'Copiado',
                extremeWeatherAlert: 'Alerta MeteorolÃ³gica Extrema',
                weather: 'Tiempo',
                dayTemp: 'Temp. DÃ­a',
                nightTemp: 'Temp. Noche',
                feelsLike: 'SensaciÃ³n',
                rainProb: 'Prob. Lluvia',
                sunriseSunset: 'Amanecer/Atardecer',
                bringUmbrella: 'ğŸŒ§ï¸ Lleva paraguas',
                keepWarm: 'ğŸ§¥ AbrÃ­gate',
                historicalAvg: 'ğŸ“Š Promedio histÃ³rico',
                usageTip: 'ğŸ’¡ Consejo',
                usageTipText: 'Cambia a "Vista de Tarjetas" para mejor visualizaciÃ³n. Datos: AccuWeather + AEMET.',
                notice: 'âš ï¸ Aviso',
                noticeText: 'El tiempo en montaÃ±a cambia rÃ¡pido. Ajusta tu plan si hay alerta extrema. Â¡Seguridad primero!',
                footerText: 'Herramienta meteorolÃ³gica para peregrinos del Camino de Santiago',
                dataSource: 'Fuente de datos: AccuWeather + AEMET (Agencia Estatal de MeteorologÃ­a)',
                weekdays: ['Dom', 'Lun', 'Mar', 'MiÃ©', 'Jue', 'Vie', 'SÃ¡b'],
                dateTooFar: 'La fecha seleccionada estÃ¡ a mÃ¡s de 1 aÃ±o. Por favor consulte el tiempo dentro de 1 aÃ±o antes de la salida.',
                historicalDataWarning: 'Aviso: Las fechas seleccionadas exceden el rango de pronÃ³stico (mÃ¡ximo 15 dÃ­as). Los datos mostrados se basan en promedios histÃ³ricos solo para referencia. Por favor consulte el pronÃ³stico actual 2 semanas antes de la salida.',
                historicalDataBadge: 'Datos HistÃ³ricos de Referencia',
                realTimeForecast: 'PronÃ³stico en Tiempo Real'
            }
        };

        // æ·»åŠ å…¶ä»–è¯­è¨€çš„ç®€åŒ–ç‰ˆæœ¬ï¼ˆæ³•è¯­ã€å¾·è¯­ã€è‘¡è„ç‰™è¯­ã€éŸ©è¯­ã€ç¹ä½“ä¸­æ–‡ï¼‰
        translations['zh-TW'] = {...translations['zh-CN'], 
            title: 'æœè–ä¹‹è·¯å¤©æ°£æŸ¥è©¢', 
            subtitle: 'ç‚ºæ‰€æœ‰æœè–è€…æä¾›ç²¾æº–çš„å¤©æ°£é å ±æœå‹™ â€¢ æ”¯æŒæ‰€æœ‰è·¯ç·š â€¢ æ­·å²æ•¸æ“šåƒè€ƒ',
            dateTooFar: 'æ‚¨é¸æ“‡çš„æ—¥æœŸè·é›¢ç¾åœ¨è¶…é1å¹´ï¼Œå»ºè­°åœ¨å‡ºç™¼å‰1å¹´å…§æŸ¥è©¢å¤©æ°£ä¿¡æ¯ã€‚',
            historicalDataWarning: 'æç¤ºï¼šæ‚¨é¸æ“‡çš„æ—¥æœŸè¶…å‡ºå¤©æ°£é å ±ç¯„åœï¼ˆæœ€å¤šæå‰15å¤©ï¼‰ã€‚ä»¥ä¸‹é¡¯ç¤ºçš„æ˜¯åŸºæ–¼æ­·å²æ•¸æ“šçš„åƒè€ƒä¿¡æ¯ï¼Œåƒ…ä¾›è¦åŠƒåƒè€ƒã€‚å»ºè­°å‡ºç™¼å‰2é€±å†æ¬¡æŸ¥è©¢å¯¦æ™‚å¤©æ°£é å ±ç²å–æœ€æº–ç¢ºçš„ä¿¡æ¯ã€‚',
            historicalDataBadge: 'æ­·å²åƒè€ƒæ•¸æ“š'
        };
        translations['fr'] = {...translations['en'], title: 'Outil MÃ©tÃ©o du Chemin', weather: 'MÃ©tÃ©o', days: 'jours'};
        translations['de'] = {...translations['en'], title: 'Camino Wetter-Tool', weather: 'Wetter', days: 'Tage'};
        translations['pt'] = {...translations['en'], title: 'Ferramenta MeteorolÃ³gica do Caminho', weather: 'Tempo', days: 'dias'};
        translations['ko'] = {...translations['en'], title: 'ì‚°í‹°ì•„ê³  ìˆœë¡€ê¸¸ ë‚ ì”¨ ë„êµ¬', weather: 'ë‚ ì”¨', days: 'ì¼'};

        const CaminoWeatherApp = () => {
            const [language, setLanguage] = useState('zh-CN');
            const [unit, setUnit] = useState('metric');
            const [days, setDays] = useState([{ date: '', location: '' }]);
            const [weatherData, setWeatherData] = useState(null);
            const [loading, setLoading] = useState(false);
            const [copied, setCopied] = useState(false);
            const [viewMode, setViewMode] = useState('cards');
            const [showHistorical, setShowHistorical] = useState(false);

            const t = (key) => translations[language][key] || translations['zh-CN'][key];
            const tempUnit = unit === 'metric' ? 'Â°C' : 'Â°F';

            const convertTemp = (celsius) => {
                return unit === 'imperial' ? Math.round(celsius * 9 / 5 + 32) : celsius;
            };

            // é¢„è®¾è·¯çº¿
            const presetRoutes = {
                custom: { days: [{ date: '', location: '' }] },
                frances115: {
                    days: [
                        { date: '', location: 'Sarria' },
                        { date: '', location: 'PortomarÃ­n' },
                        { date: '', location: 'Palas de Rei' },
                        { date: '', location: 'Arzua' },
                        { date: '', location: 'O Pedrouzo' },
                        { date: '', location: 'Santiago de Compostela' }
                    ]
                },
                francesFull: {
                    days: [
                        { date: '', location: 'Saint-Jean-Pied-de-Port' },
                        { date: '', location: 'Roncesvalles' },
                        { date: '', location: 'Zubiri' },
                        { date: '', location: 'Pamplona' },
                        { date: '', location: 'Puente la Reina' },
                        { date: '', location: 'Estella' },
                        { date: '', location: 'LogroÃ±o' },
                        { date: '', location: 'NÃ¡jera' },
                        { date: '', location: 'Santo Domingo de la Calzada' },
                        { date: '', location: 'Belorado' },
                        { date: '', location: 'San Juan de Ortega' },
                        { date: '', location: 'Burgos' },
                        { date: '', location: 'Hornillos del Camino' },
                        { date: '', location: 'Castrojeriz' },
                        { date: '', location: 'FrÃ³mista' },
                        { date: '', location: 'CarriÃ³n de los Condes' },
                        { date: '', location: 'Terradillos de los Templarios' },
                        { date: '', location: 'Mansilla de las Mulas' },
                        { date: '', location: 'LeÃ³n' },
                        { date: '', location: 'Astorga' },
                        { date: '', location: 'FoncebadÃ³n' },
                        { date: '', location: 'Ponferrada' },
                        { date: '', location: 'Villafranca del Bierzo' },
                        { date: '', location: 'O Cebreiro' },
                        { date: '', location: 'Triacastela' },
                        { date: '', location: 'Sarria' },
                        { date: '', location: 'PortomarÃ­n' },
                        { date: '', location: 'Palas de Rei' },
                        { date: '', location: 'Arzua' },
                        { date: '', location: 'O Pedrouzo' },
                        { date: '', location: 'Santiago de Compostela' }
                    ]
                },
                portuguese: {
                    days: [
                        { date: '', location: 'Porto' },
                        { date: '', location: 'Barcelos' },
                        { date: '', location: 'Ponte de Lima' },
                        { date: '', location: 'ValenÃ§a' },
                        { date: '', location: 'Tui' },
                        { date: '', location: 'Redondela' },
                        { date: '', location: 'Pontevedra' },
                        { date: '', location: 'PadrÃ³n' },
                        { date: '', location: 'Santiago de Compostela' }
                    ]
                },
                northern: {
                    days: [
                        { date: '', location: 'IrÃºn' },
                        { date: '', location: 'San SebastiÃ¡n' },
                        { date: '', location: 'Zarautz' },
                        { date: '', location: 'Deba' },
                        { date: '', location: 'Markina-Xemein' },
                        { date: '', location: 'Bilbao' },
                        { date: '', location: 'Castro Urdiales' },
                        { date: '', location: 'Laredo' },
                        { date: '', location: 'Santander' },
                        { date: '', location: 'Santillana del Mar' },
                        { date: '', location: 'Comillas' },
                        { date: '', location: 'San Vicente de la Barquera' },
                        { date: '', location: 'Llanes' },
                        { date: '', location: 'Ribadesella' },
                        { date: '', location: 'GijÃ³n' },
                        { date: '', location: 'AvilÃ©s' },
                        { date: '', location: 'Cudillero' },
                        { date: '', location: 'Luarca' },
                        { date: '', location: 'Ribadeo' },
                        { date: '', location: 'LourenzÃ¡' },
                        { date: '', location: 'MondoÃ±edo' },
                        { date: '', location: 'Vilalba' },
                        { date: '', location: 'Arzua' },
                        { date: '', location: 'Santiago de Compostela' }
                    ]
                },
                primitive: {
                    days: [
                        { date: '', location: 'Oviedo' },
                        { date: '', location: 'Grado' },
                        { date: '', location: 'Salas' },
                        { date: '', location: 'Tineo' },
                        { date: '', location: 'Pola de Allande' },
                        { date: '', location: 'Berducedo' },
                        { date: '', location: 'Grandas de Salime' },
                        { date: '', location: 'A Fonsagrada' },
                        { date: '', location: 'O CÃ¡davo' },
                        { date: '', location: 'Lugo' },
                        { date: '', location: 'San Romao' },
                        { date: '', location: 'Melide' },
                        { date: '', location: 'Arzua' },
                        { date: '', location: 'Santiago de Compostela' }
                    ]
                }
            };

            const loadRoute = (routeKey) => {
                setDays([...presetRoutes[routeKey].days]);
                setWeatherData(null);
            };

            const autoFillDates = () => {
                let startIndex = days.findIndex(d => d.date);
                let startDate = startIndex >= 0 ? new Date(days[startIndex].date) : new Date();
                if (startIndex === -1) startIndex = 0;
                
                setDays(days.map((day, index) => {
                    const date = new Date(startDate);
                    date.setDate(startDate.getDate() + (index - startIndex));
                    return { ...day, date: date.toISOString().split('T')[0] };
                }));
            };

            const fetchWeather = async () => {
                setLoading(true);
                const mockWeather = days.map((day, i) => {
                    const hasAlert = i === 2 || i === 4;
                    return {
                        date: day.date,
                        location: day.location,
                        condition: ['å¤šäº‘', 'å°é›¨', 'æš´é›¨', 'æ™´', 'å¤§é£', 'å°é›¨', 'æ™´', 'é˜´'][i % 8],
                        dayTemp: convertTemp([12, 11, 8, 15, 10, 11, 13, 14][i % 8]),
                        nightTemp: convertTemp([6, 5, 3, 8, 4, 5, 7, 8][i % 8]),
                        dayFeels: convertTemp([10, 9, 5, 13, 8, 9, 11, 12][i % 8]),
                        nightFeels: convertTemp([4, 3, 1, 6, 2, 3, 5, 6][i % 8]),
                        rainChance: [30, 60, 90, 10, 40, 70, 20, 15][i % 8],
                        sunrise: '08:45',
                        sunset: '18:15',
                        alert: hasAlert ? (i === 2 ? t('extremeWeatherAlert') : t('extremeWeatherAlert')) : null
                    };
                });
                setTimeout(() => { setWeatherData(mockWeather); setLoading(false); }, 1500);
            };

            return (
                <div className="p-4 md:p-8 max-w-7xl mx-auto">
                    <div className="bg-white rounded-3xl shadow-2xl p-6 md:p-10 mb-8">
                        <div className="flex justify-between items-start mb-6">
                            <div>
                                <h1 className="text-4xl font-bold text-gray-800 mb-2">{t('title')}</h1>
                                <p className="text-lg text-gray-600">{t('subtitle')}</p>
                                <div className="mt-3 inline-block bg-blue-50 border border-blue-200 rounded-lg px-3 py-1.5">
                                    <span className="text-xs text-blue-800 font-medium">
                                        âš ï¸ {language.startsWith('zh') ? 'æ¼”ç¤ºç‰ˆæœ¬ - å½“å‰ä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®' : 'Demo Version - Using Simulated Data'}
                                    </span>
                                </div>
                            </div>
                            <div className="flex gap-3">
                                <select value={language} onChange={(e) => setLanguage(e.target.value)} className="px-4 py-2 border-2 rounded-lg">
                                    <option value="zh-CN">ğŸ‡¨ğŸ‡³ ç®€ä½“ä¸­æ–‡</option>
                                    <option value="zh-TW">ğŸ‡¹ğŸ‡¼ ç¹é«”ä¸­æ–‡</option>
                                    <option value="en">ğŸ‡¬ğŸ‡§ English</option>
                                    <option value="es">ğŸ‡ªğŸ‡¸ EspaÃ±ol</option>
                                    <option value="fr">ğŸ‡«ğŸ‡· FranÃ§ais</option>
                                    <option value="de">ğŸ‡©ğŸ‡ª Deutsch</option>
                                    <option value="pt">ğŸ‡µğŸ‡¹ PortuguÃªs</option>
                                    <option value="ko">ğŸ‡°ğŸ‡· í•œêµ­ì–´</option>
                                </select>
                                <button onClick={() => setUnit(unit === 'metric' ? 'imperial' : 'metric')} className="px-4 py-2 bg-blue-500 text-white rounded-lg">
                                    {tempUnit}
                                </button>
                            </div>
                        </div>

                        <div className="bg-blue-50 border-l-4 border-blue-500 rounded-lg p-4 mb-6">
                            <h3 className="font-semibold text-blue-900 mb-2">
                                ğŸ“Š {language.startsWith('zh') ? 'æ•°æ®è¯´æ˜' : 'Data Information'}
                            </h3>
                            <div className="text-sm text-blue-800 space-y-1">
                                <p>
                                    <strong>â€¢ {language.startsWith('zh') ? '0-15å¤©å†…å‡ºå‘' : 'Departure within 15 days'}:</strong>{' '}
                                    {language.startsWith('zh') 
                                        ? 'æ˜¾ç¤ºå®æ—¶å¤©æ°”é¢„æŠ¥ï¼ˆæ¥è‡ªAccuWeather + AEMETï¼‰' 
                                        : 'Real-time weather forecast (AccuWeather + AEMET)'}
                                </p>
                                <p>
                                    <strong>â€¢ {language.startsWith('zh') ? '15å¤©-1å¹´å†…å‡ºå‘' : 'Departure in 15 days - 1 year'}:</strong>{' '}
                                    {language.startsWith('zh') 
                                        ? 'æ˜¾ç¤ºå†å²å¹³å‡æ•°æ®ï¼ˆè¿‡å»10å¹´åŒæœŸå¹³å‡æ¸©åº¦ï¼Œä»…ä¾›å‚è€ƒï¼‰' 
                                        : 'Historical average data (10-year average temps, reference only)'}
                                </p>
                                <p>
                                    <strong>â€¢ {language.startsWith('zh') ? 'è¶…è¿‡1å¹´' : 'Beyond 1 year'}:</strong>{' '}
                                    {language.startsWith('zh') 
                                        ? 'å»ºè®®ä¸´è¿‘å‡ºå‘æ—¶å†æŸ¥è¯¢' 
                                        : 'Please check closer to departure date'}
                                </p>
                            </div>
                        </div>

                        <div className="bg-gradient-to-r from-amber-50 to-orange-50 rounded-xl p-6 mb-6">
                            <h2 className="text-xl font-semibold text-gray-800 mb-4">{t('selectRoute')}</h2>
                            <div className="grid grid-cols-1 md:grid-cols-3 gap-3">
                                <button onClick={() => loadRoute('custom')} className="p-4 rounded-lg border-2 border-gray-200 bg-white hover:border-amber-500 hover:shadow-lg transition-all text-left">
                                    <div className="font-semibold text-gray-800">{t('customRoute')}</div>
                                    <div className="text-sm text-gray-600 mt-1">{t('customRouteDesc')}</div>
                                </button>
                                <button onClick={() => loadRoute('frances115')} className="p-4 rounded-lg border-2 border-gray-200 bg-white hover:border-amber-500 hover:shadow-lg transition-all text-left">
                                    <div className="font-semibold text-gray-800">ğŸ‡«ğŸ‡· {language.startsWith('zh') ? 'æ³•å›½ä¹‹è·¯ 115km' : 'French Way 115km'}</div>
                                    <div className="text-sm text-gray-600 mt-1">Sarria â†’ Santiago (6{language.startsWith('zh') ? 'å¤©' : ' days'})</div>
                                </button>
                                <button onClick={() => loadRoute('francesFull')} className="p-4 rounded-lg border-2 border-gray-200 bg-white hover:border-amber-500 hover:shadow-lg transition-all text-left">
                                    <div className="font-semibold text-gray-800">ğŸ‡«ğŸ‡· {language.startsWith('zh') ? 'æ³•å›½ä¹‹è·¯ï¼ˆå…¨ç¨‹ï¼‰' : 'French Way (Full)'}</div>
                                    <div className="text-sm text-gray-600 mt-1">SJPP â†’ Santiago (31{language.startsWith('zh') ? 'å¤©ç²¾ç®€ç‰ˆ' : ' days'})</div>
                                </button>
                                <button onClick={() => loadRoute('portuguese')} className="p-4 rounded-lg border-2 border-gray-200 bg-white hover:border-amber-500 hover:shadow-lg transition-all text-left">
                                    <div className="font-semibold text-gray-800">ğŸ‡µğŸ‡¹ {language.startsWith('zh') ? 'è‘¡è„ç‰™ä¹‹è·¯' : 'Portuguese Way'}</div>
                                    <div className="text-sm text-gray-600 mt-1">Porto â†’ Santiago (9{language.startsWith('zh') ? 'å¤©' : ' days'})</div>
                                </button>
                                <button onClick={() => loadRoute('northern')} className="p-4 rounded-lg border-2 border-gray-200 bg-white hover:border-amber-500 hover:shadow-lg transition-all text-left">
                                    <div className="font-semibold text-gray-800">â›°ï¸ {language.startsWith('zh') ? 'åŒ—æ–¹ä¹‹è·¯' : 'Northern Way'}</div>
                                    <div className="text-sm text-gray-600 mt-1">IrÃºn â†’ Santiago (24{language.startsWith('zh') ? 'å¤©ç²¾ç®€ç‰ˆ' : ' days'})</div>
                                </button>
                                <button onClick={() => loadRoute('primitive')} className="p-4 rounded-lg border-2 border-gray-200 bg-white hover:border-amber-500 hover:shadow-lg transition-all text-left">
                                    <div className="font-semibold text-gray-800">ğŸ”ï¸ {language.startsWith('zh') ? 'åŸå§‹ä¹‹è·¯' : 'Primitive Way'}</div>
                                    <div className="text-sm text-gray-600 mt-1">Oviedo â†’ Santiago (14{language.startsWith('zh') ? 'å¤©' : ' days'})</div>
                                </button>
                            </div>
                        </div>

                        <div className="bg-gray-50 rounded-xl p-6">
                            <div className="flex justify-between items-center mb-4">
                                <h2 className="text-xl font-semibold">{t('itinerary')}ï¼ˆ{t('total')} {days.length} {t('days')}ï¼‰</h2>
                                <button onClick={autoFillDates} className="px-4 py-2 bg-blue-500 text-white rounded-lg">
                                    {t('autoFillDates')}
                                </button>
                            </div>
                            <div className="space-y-3">
                                {days.map((day, i) => (
                                    <div key={i} className="flex gap-3 bg-white p-3 rounded-lg">
                                        <span className="text-amber-600 font-semibold w-12 pt-2">D{i + 1}</span>
                                        <input type="date" value={day.date} onChange={(e) => {
                                            const newDays = [...days];
                                            newDays[i].date = e.target.value;
                                            setDays(newDays);
                                        }} className="px-3 py-2 border rounded-lg" />
                                        <input type="text" value={day.location} onChange={(e) => {
                                            const newDays = [...days];
                                            newDays[i].location = e.target.value;
                                            setDays(newDays);
                                        }} className="flex-1 px-3 py-2 border rounded-lg" placeholder={t('locationPlaceholder')} />
                                        <button onClick={() => setDays(days.filter((_, idx) => idx !== i))} disabled={days.length === 1} className="p-2 text-red-500 hover:bg-red-50 rounded-lg disabled:opacity-30">
                                            ğŸ—‘ï¸
                                        </button>
                                    </div>
                                ))}
                            </div>
                            <button onClick={() => setDays([...days, { date: '', location: '' }])} className="w-full mt-4 py-3 border-2 border-dashed border-gray-300 hover:border-amber-500 rounded-lg">
                                + {t('addDay')}
                            </button>
                        </div>

                        <div className="mt-6 flex gap-3">
                            <button onClick={fetchWeather} disabled={loading} className="flex-1 bg-gradient-to-r from-amber-500 to-orange-500 text-white font-semibold py-4 px-6 rounded-xl">
                                {loading ? t('querying') : 'â˜ï¸ ' + t('queryWeather')}
                            </button>
                            <button onClick={() => setShowHistorical(!showHistorical)} className={`px-6 py-4 rounded-xl font-semibold ${showHistorical ? 'bg-purple-500 text-white' : 'border-2 border-purple-500 text-purple-500'}`}>
                                â„¹ï¸ {t('historicalData')}
                            </button>
                        </div>
                    </div>

                    {weatherData && (
                        <div className="bg-white rounded-3xl shadow-2xl p-6 md:p-10">
                            {weatherData[0]?.isHistorical && (
                                <div className="mb-6 bg-yellow-50 border-2 border-yellow-300 rounded-xl p-4">
                                    <div className="flex items-center gap-2 text-yellow-800 font-semibold mb-2">
                                        ğŸ“Š {language.startsWith('zh') ? 'å†å²å‚è€ƒæ•°æ®' : 'Historical Reference Data'}
                                    </div>
                                    <p className="text-yellow-700 text-sm">
                                        {language.startsWith('zh') 
                                            ? 'æ‚¨é€‰æ‹©çš„æ—¥æœŸè¶…å‡ºå¤©æ°”é¢„æŠ¥èŒƒå›´ï¼ˆæœ€å¤šæå‰15å¤©ï¼‰ã€‚ä»¥ä¸‹æ•°æ®åŸºäºå†å²åŒæœŸå¹³å‡å€¼ï¼Œä»…ä¾›è§„åˆ’å‚è€ƒã€‚å»ºè®®å‡ºå‘å‰2å‘¨å†æ¬¡æŸ¥è¯¢å®æ—¶å¤©æ°”é¢„æŠ¥ã€‚' 
                                            : 'Your selected dates exceed weather forecast range (max 15 days ahead). Data shown is based on historical averages for reference only. Please check actual forecast 2 weeks before departure.'}
                                    </p>
                                </div>
                            )}
                            
                            <div className="flex justify-between items-center mb-6">
                                <h2 className="text-3xl font-bold">{t('weatherForecast')}</h2>
                                <div className="flex gap-3">
                                    <button onClick={() => setViewMode(viewMode === 'cards' ? 'table' : 'cards')} className="px-4 py-2 bg-purple-500 text-white rounded-lg">
                                        {viewMode === 'cards' ? t('cardView') : t('tableView')}
                                    </button>
                                    <button onClick={() => { setCopied(true); setTimeout(() => setCopied(false), 2000); }} className="px-6 py-3 bg-green-500 text-white rounded-xl">
                                        {copied ? t('copied') : t('copyTable')}
                                    </button>
                                </div>
                            </div>

                            {viewMode === 'cards' ? (
                                <div className="space-y-4">
                                    {weatherData.map((day, i) => {
                                        const weekDay = t('weekdays')[new Date(day.date).getDay()];
                                        return (
                                            <div key={i} className="bg-gradient-to-br from-white to-gray-50 rounded-2xl shadow-lg p-6 border-2 border-gray-100">
                                                <div className="flex items-center gap-3 mb-4">
                                                    <div className="bg-amber-500 text-white rounded-full w-12 h-12 flex items-center justify-center font-bold">D{i + 1}</div>
                                                    <div>
                                                        <div className="text-2xl font-bold">{day.location}</div>
                                                        <div className="text-sm text-gray-600">{day.date.substring(5)} {weekDay}</div>
                                                    </div>
                                                </div>
                                <div className="grid grid-cols-2 md:grid-cols-4 gap-4">
                                                    <div className="bg-orange-50 rounded-xl p-3 text-center">
                                                        <div className="text-3xl mb-1">â˜ï¸</div>
                                                        <div className="text-sm text-gray-600">{t('weather')}</div>
                                                        <div className="font-semibold">
                                                            {day.isHistorical 
                                                                ? (language.startsWith('zh') ? 'å†å²æ•°æ®' : 'Historical') 
                                                                : day.condition}
                                                        </div>
                                                    </div>
                                                    <div className="bg-red-50 rounded-xl p-3 text-center">
                                                        <div className="text-3xl mb-1">ğŸŒ¡ï¸</div>
                                                        <div className="text-sm text-gray-600">{t('dayTemp')}</div>
                                                        <div className="font-bold text-xl text-red-600">{day.dayTemp}{tempUnit}</div>
                                                        <div className="text-xs text-gray-500">
                                                            {day.isHistorical 
                                                                ? (language.startsWith('zh') ? 'å¹³å‡å€¼' : 'Average') 
                                                                : `${t('feelsLike')} ${day.dayFeels}${tempUnit}`}
                                                        </div>
                                                    </div>
                                                    <div className="bg-blue-50 rounded-xl p-3 text-center">
                                                        <div className="text-3xl mb-1">ğŸŒ™</div>
                                                        <div className="text-sm text-gray-600">{t('nightTemp')}</div>
                                                        <div className="font-bold text-xl text-blue-600">{day.nightTemp}{tempUnit}</div>
                                                        <div className="text-xs text-gray-500">
                                                            {day.isHistorical 
                                                                ? (language.startsWith('zh') ? 'å¹³å‡å€¼' : 'Average') 
                                                                : `${t('feelsLike')} ${day.nightFeels}${tempUnit}`}
                                                        </div>
                                                    </div>
                                                    {!day.isHistorical && (
                                                        <div className="bg-cyan-50 rounded-xl p-3 text-center">
                                                            <div className="text-3xl mb-1">ğŸ’§</div>
                                                            <div className="text-sm text-gray-600">{t('rainProb')}</div>
                                                            <div className="font-bold text-xl">{day.rainChance}%</div>
                                                        </div>
                                                    )}
                                                    {day.isHistorical && (
                                                        <div className="bg-purple-50 rounded-xl p-3 text-center">
                                                            <div className="text-3xl mb-1">ğŸ“Š</div>
                                                            <div className="text-sm text-gray-600">
                                                                {language.startsWith('zh') ? 'æ•°æ®æ¥æº' : 'Data Source'}
                                                            </div>
                                                            <div className="font-semibold text-sm">
                                                                {language.startsWith('zh') ? 'å†å²å¹³å‡' : 'Historical Avg'}
                                                            </div>
                                                            <div className="text-xs text-gray-500">10{language.startsWith('zh') ? 'å¹´' : ' years'}</div>
                                                        </div>
                                                    )}
                                                </div>
                                                {day.alert && (
                                                    <div className="mt-3 bg-red-100 text-red-800 px-3 py-2 rounded-full text-sm font-semibold">
                                                        âš ï¸ {day.alert}
                                                    </div>
                                                )}
                                            </div>
                                        );
                                    })}
                                </div>
                            ) : (
                                <div className="bg-gray-50 p-6 rounded-xl font-mono text-sm overflow-x-auto">
                                    {/* ç®€åŒ–çš„è¡¨æ ¼è§†å›¾ */}
                                    <div>{t('weatherForecast')} - {t('tableView')}</div>
                                </div>
                            )}

                            <div className="mt-6 grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div className="bg-blue-50 border-2 border-blue-200 rounded-xl p-4">
                                    <h3 className="font-semibold text-blue-800 mb-2">{t('usageTip')}</h3>
                                    <p className="text-sm text-blue-700">{t('usageTipText')}</p>
                                </div>
                                <div className="bg-amber-50 border-2 border-amber-200 rounded-xl p-4">
                                    <h3 className="font-semibold text-amber-800 mb-2">{t('notice')}</h3>
                                    <p className="text-sm text-amber-700">{t('noticeText')}</p>
                                </div>
                            </div>
                        </div>
                    )}

                    <div className="mt-8 text-center text-gray-600 text-sm">
                        <p>{t('footerText')}</p>
                        <p className="mt-2">{t('dataSource')}</p>
                    </div>
                </div>
            );
        };

        ReactDOM.render(<CaminoWeatherApp />, document.getElementById('root'));
    </script>
</body>
</html>